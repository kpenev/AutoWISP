{% extends 'core/lcars_app.html' %}
{% load static %}

{% block header_title %}{% block app_title %}
The Survey
{% endblock %}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link rel="stylesheet" href="{% static 'configuration/css/survey.css' %}">
{% endblock %}

{% block edit_survey_link %}{% endblock %}

{% block main %}
{% with 'camera telescope mount' as equipment_components_str %}
{% with equipment_components_str.split as equipment_components %}
<div class="lcars-row">
    <div class="lcars-column centered" style="width:100%">
        {% with component="observer" item_list=observers attribute_list=attributes.observer %}
        {% if selected_component in equipment_components %}
        {% include "./survey_class.html" with track_access=1%}
        {% else %}
        {% include "./survey_class.html" with track_access=0%}
        {% endif %}
        <div class="lcars-bar double-spacer"></div>
        <div class="lcars-bar double-spacer"></div>

        {% endwith %}

        {% include "./survey_class.html" with component="observatory" item_list=observatories attribute_list=attributes.observatory%}
    </div>
    <div class="lcars-column" style="width: 100%">
        {% for component in equipment_components %}
        {% cycle cameras telescopes mounts as item_list silent %}
        {% cycle attributes.camera attributes.telescope attributes.mount as attribute_list silent %}
        {% cycle types.camera types.telescope types.mount as component_types silent %}

        {% if selected_component == "observer" %}
        {% include "./survey_class.html" with track_access=1 types=component_types %}
        {% else %}
        {% include "./survey_class.html" with track_access=0 types=component_types %}
        {% endif %}
        {% if not forloop.last %}
        <div class="lcars-bar double-spacer"></div>
        <div class="lcars-bar double-spacer"></div>
        {% endif %}
        {% endfor %}
    </div>
</div>

{% endwith %}
{% endwith %}



        {% with 'camera telescope mount' as equipment_components_str %}
        {% with equipment_components_str.split as equipment_components %}
        <br/>
        <div id="survey" class="survey-container" style="grid-template-columns: 33% 33% 33%"> 
            {% for component in equipment_components %}
            <div class="survey-component">
                <table class='survey-component-table'>
                    <tr>
                        {% if selected_component == 'observer' %}
                        <th>{{component.title}}s</th>
                        <th>Observer has<br/>Access</th>
                        {% else %}
                        <th colspan=2>{{component.title}}s</th>
                        {% endif %}
                    </tr>
                    {% cycle cameras telescopes mounts as equipment_list silent %}
                    {% cycle attributes.camera attributes.telescope attributes.mount as component_attributes silent %}
                    {% cycle types.camera types.telescope types.mount as component_types silent %}
                    {% cycle type_attributes.camera type_attributes.telescope type_attributes.mount as component_type_attrs silent %}


                    {% for item in equipment_list %}
                    {% if selected_component == 'observer' and item.id >= 0%}
                    {% include "./survey_item_access.html" %}
                    {% else %}
                    {% include "./survey_item_noaccess.html" with attributes=component_attributes types=component_types type_attributes=component_type_attrs %}
                    {% endif %}
                    {% endfor %}
                </table>
            </div>
            {% endfor %}
        </div>
        {% endwith %}
        {% endwith %}

{% endblock %}
