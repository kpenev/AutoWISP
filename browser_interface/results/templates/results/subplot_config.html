<div class="lcars-row">
    <div id="previous-curve" 
         class="lcars-bracket left center-center lcars-melrose-bg button">
        <i class="fa fa-plus"></i>
    </div>

    <div id="define-curve" class="lcars-column" style="width: 100%">
        {% for char in "xym"|make_list %}
        {% cycle data_select.0.plot_config.0.x_quantity data_select.0.plot_config.0.y_quantity data_select.0.plot_config.0.match_by as quantity silent %}
        {% cycle 'X' 'Y' 'Aggregate by' as label silent %}
        <div class="config-row">
            <label for="{{ label|slugify }}">{{label}}:</label>
            <div class="lcars-bracket left"></div>
            <select name="{{ label|slugify }}" 
                    id="{{ label|slugify }}"
                    class="lcars-text-box lcars-gray-bg lcars-husk-color param">
                {% for option in data_select.0.expressions.items %}
                <option value="{{option.0}}" 
                        {% if option.0 == quantity %}
                        selected
                        {% endif %}
                        >
                        {{option.0}}
                </option>
                {% endfor %}
            </select>
            <div class="lcars-bracket right"></div>
        </div>
        {% endfor %}
        {% for axis in "ac"|make_list %}
        {% cycle data_select.0.plot_config.0.aggregate data_select.0.plot_config.0.curve_label as value silent %}
        {% cycle "Aggregate func." "Curve label" as label silent %}
        <div class="config-row">
            <label for="{{ label|slugify }}">{{ label }}:</label>
            <input type="text" 
                   id="{{ label|slugify }}"
                   class="param"
                   value="{{ value }}">
        </div>
        {% endfor %}
    </div>

    <div id="next-curve" 
         class="lcars-bracket right center-center button">
        <i class="fa fa-chevron-right"></i>
    </div>
</div>

{{ data_select|json_script:"lc-data-select" }}

{% for axis in "XYT"|make_list %}
{% cycle plot_decorations.x_label plot_decorations.y_label plot_decorations.title as value silent %}
{% cycle "X label" "Y label" "Title" as label silent %}
<div class="config-row">
    <label for="{{ label|slugify }}">{{ label }}:</label>
    <input type="text" 
           id="{{ label|slugify }}"
           class="param"
           value="{{ value }}">
</div>
{% endfor %}


<div class="lcars-row">
    <div class="lcars-bracket left"></div>
    <select name="select-model" 
            id="select-model"
            class="lcars-text-box lcars-gray-bg lcars-husk-color param"
            style="width: 100%">
        <option value=""
                {% if not data_select.0.model %}
                selected
                {% endif %}
                >
        </option>
        <option value="transit"
                {% if data_select.0.model %}
                selected
                {% endif %}
                >
                Transit
        </option>
    </select>
    <div class="lcars-bracket right"></div>
</div>


<div class="config-row"></div>
<table id="define-model" 
       class="lcars-table standard-header"
       {% if not config.model.enabled %}
       style="display: none;"
       {% endif %}
       >
</table>

<div class="lcars-bar horizontal config-row" style="width: 100%">
    Plot Quantities
</div>
<div class="config-row"></div>
<table id="lc-expressions" 
       class="lcars-table standard-header">
    <thead>
        <tr>
            <th>Name</th>
            <th>Expression</th>
        </tr>
    </thead>
    <tbody>
        {% for expr in data_select.0.expressions.items %}
        <tr>
            <td> 
                <input type="text"
                       id="lc-quantity-{{ forloop.counter0 }}"
                       class="param"
                       value="{{ expr.0 }}">
            </td>
            <td style="width: 100%">
                <input type="text"
                       id="lc-expression-{{ forloop.counter0 }}"
                       class="param"
                       style="width: 100%"
                       value="{{ expr.1 }}">
            </td>
        </tr>
        {% endfor %}
        <tr> 
            <td colspan="2">
                <div id="add-expression"
                     class="lcars-element button rounded lcars-melrose-bg center-center">
                    New
                </div>
            </td>
        </tr>
    </tbody>
</table>
</table>
